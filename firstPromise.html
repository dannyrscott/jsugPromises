<html>

	<head>

	</head>

	<body>
	</body>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script>
		var x;
		(function($){
			var deferred = new $.Deferred();
	        var promise = deferred.promise();

	        console.log(promise.state());  // "pending"
	        deferred.reject();
	        console.log(promise.state());  // "rejected"

	        function someAsyncFunction(x) {
	        	var def = new $.Deferred();
	        	console.log('running...');
	        	setTimeout(function(){
	        		console.log('i finished');
	        		def.resolve();
	        	},x);
	        	return def.promise();
	        }

	        x = someAsyncFunction(5000);

	        x.then(someAsyncFunction(1000));

			// x = $.when(
			// 	someAsyncFunction(),
			// 	someAsyncFunction());
	        x.done(function(){
	        	console.log('Success!');
	        });

	        x.fail(function(){
	        	console.log('Fail!');
	        });

	        x.always(function(){
	        	console.log('I always run');
	        });

		})(jQuery);
	</script>
</html>